# Модуль оплаты для HostCMS

## Установка модуля

  * Создайте резервную копию вашего магазина и базы данных
  * Загрузите [архив](https://github.com/beGateway/hostcms-payment-module/archive/master.zip) и переместите папку `hostcmsfiles` в корень вашего сайта

## Настройка модуля

1. В разделе администрирования HostCMS перейдите в раздел `Интернет-магазины`, выберите ваш магазин и в появившемся окне выберите вкладку `Справочники` — `Платежные системы`.

  ![Шаг 1](https://github.com/beGateway/hostcms-payment-module/raw/master/doc/pic1.png)

2. Наведите курсор на заголовок `Платежная система` и нажмите кнопку `Добавить`.

  ![Шаг 2](https://github.com/beGateway/hostcms-payment-module/raw/master/doc/pic2.png)

3. Укажите название вашей платежной системы или способа оплаты (например, `Банковская карта`), выберите валюту, введите описание (например, `Оплата банковской картой VISA, MasterCard`) и затем нажмите кнопку `Применить`

  ![Шаг 3](https://github.com/beGateway/hostcms-payment-module/raw/master/doc/pic3.png)

4. Запомните Код платежной системы
5. Выберите `Банковская карта` и нажмите кнопку `Редактировать` (пиктограмма `карандаш`).

  ![Шаг 5](https://github.com/beGateway/hostcms-payment-module/raw/master/doc/pic5.png)

6. В поле `Обработчик` вставьте код из файла handlerXX.php
7. Во вставленном коде замените значение XX в названии класса Shop_Payment_System_HandlerXX на код платежной системы (см. п. 4)
8. Задайте в коде обработчика Ваши настройки. Описания настроек указаны в самом коде обработчика.
9. По завершению редактирования включите чекбокс `Активность` и нажмите кнопку `Применить`

  ![Шаг 9](https://github.com/beGateway/hostcms-payment-module/raw/master/doc/pic9.png)

## Примечания

Разработано и протестировано c HostCMS 6
Требует PHP 5.3+

### Тестовые данные

Вы можете использовать следующие данные, чтобы настроить способ оплаты в
тестовом режиме:

  * Идентификационный номер магазина `$_shop_id = 361`
  * Секретный ключ магазина `$_shop_key = "b8647b68898b084b836474ed8d61ffe117c9a01168d867f24953b776ddcb134d"`
  * Домен платежного шлюза `$_gateway_base = "demo-gateway.begateway.com"`
  * Домен платежной страницы `$_checkout_base = "checkout.begateway.com"`

Используйте следующий тестовый набор для тестового платежа:

  * номер карты __4200000000000000__
  * имя на карте __John Doe__
  * месяц срока действия карты __01__, чтобы получить успешный платеж
  * месяц срока действия карты __10__, чтобы получить неуспешный платеж
  * CVC __123__

## Нашли ошибку или у вас есть предложение по улучшению модуля?

Создайте [запрос](https://github.com/beGateway/hostcms-payment-module/issues/new), в котором:

  * укажите наименование CMS и компонента магазина, а также их версии
  * укажите версию платежного модуля (доступна в поле кода обработчика)
  * опишите проблему или предложение
  * приложите снимок экрана (для большей информативности)
